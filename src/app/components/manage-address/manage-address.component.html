   
   <div  class="container mt-3 p-4">

        <p class="fs25">Add Address</p>

        <button mat-raised-button color="primary" (click)="toggleForm()">
            {{ showForm ? 'Cancel' : 'Add Address' }}
        </button>

        <div *ngIf="showForm" class="container d-flex justify-content-center align-items-center p-4">
            <div class="card shadow-lg p-4 rounded-4" style="width: 70rem;border-radius: 14px;">
            <h5>Address Form</h5>

            <form name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" >


                    <div class="row g-3 mt-2">
                        <div class="col-md-12">
                            <label for="inputState" class="form-label">State</label>
                            <select id="inputState" class="form-select bg-light text-dark">
                            <option selected >INDIA</option>
                            </select>
                        </div>
                    </div>

                    <div class="row g-3 mt-2">
                        <!-- NAME -->
                        <div class="col">
                        <label for="Name" class="form-label">Full Name (First and Last Name)</label>
                        <input 
                        type="text"
                        class="form-control"
                        name="customerName"
                        required="required"
                        [(ngModel)]="addressForm.customerName"
                        #customerName="ngModel"
                        pattern="^[a-zA-Z ]{3,}$"
                        placeholder="Enter Full Name"
                        [class.dirty]="customerName.dirty" 
                        [class.touched]="customerName.touched"
                        [ngClass]="{ 'is-invalid': customerName.errors && (customerName.touched || customerName.dirty ) }">

                            <div *ngIf="customerName.errors && (customerName.touched || customerName.dirty )" class="invalid-feedback">
                            
                                <div *ngIf="customerName.errors['required']">
                                    Full Name is required.
                                </div>
                                <div *ngIf="customerName.errors['pattern']">
                                    Full Name is must be a 3 Character.
                                </div>
                            </div>
                        </div>

                        <!-- MOBILE -->
                        <div class="col">
                            <label for="Name" class="form-label">Mobile Number</label>
                            <input 
                            type="tel"
                            class="form-control"
                            name="mobileNumber"
                            required="required"
                            [(ngModel)]="addressForm.mobileNumber"
                            #mobileNumber="ngModel"
                            pattern="^\d{10}$"
                            placeholder="Enter Mobile Number"
                            [class.dirty]="mobileNumber.dirty" 
                            [class.touched]="mobileNumber.touched"
                            [ngClass]="{ 'is-invalid': mobileNumber.errors && (mobileNumber.touched || mobileNumber.dirty ) }">
        
                                <div *ngIf="mobileNumber.errors && (mobileNumber.touched || mobileNumber.dirty )" class="invalid-feedback">
                                
                                    <div *ngIf="mobileNumber.errors['required']">
                                        mobile Number is required.
                                    </div>
                                    <div *ngIf="mobileNumber.errors['pattern']">
                                        mobile Number is must be a 10 Character.
                                    </div>
                                </div>
                        </div>
                    </div>

                    <div class="row g-3 mt-2">
                        <!-- FLAT HOUSE NO BUILDING -->
                        <div class="col">
                            <label for="Name" class="form-label">Flat ,Area House No</label>
                            <input 
                            type="text"
                            class="form-control"
                            name="area"
                            required="required"
                            [(ngModel)]="addressForm.area"
                            #area="ngModel"
                            placeholder="Enter Flat , Area"
                            [class.dirty]="area.dirty" 
                            [class.touched]="area.touched"
                            [ngClass]="{ 'is-invalid': area.errors && (area.touched || area.dirty ) }">
        
                                <div *ngIf="area.errors && (area.touched || area.dirty )" class="invalid-feedback">
                                
                                    <div *ngIf="area.errors['required']">
                                        Flat,House No ,Appartment is required.
                                    </div>
                                </div>
                        </div>


                        <!-- POSTALCODE -->
                        <div class="col">
                            <label for="Name" class="form-label">PostalCode</label>
                            <input 
                            type="tel"
                            class="form-control"
                            name="postalCode"
                            required="required"
                            [(ngModel)]="addressForm.postalCode"
                            #postalCode="ngModel"
                            pattern="^\d{6}$"
                            placeholder="Enter PostalCode"
                            [class.dirty]="postalCode.dirty" 
                            [class.touched]="postalCode.touched"
                            [ngClass]="{ 'is-invalid': postalCode.errors && (postalCode.touched || postalCode.dirty ) }">
        
                                <div *ngIf="postalCode.errors && (postalCode.touched || postalCode.dirty )" class="invalid-feedback">
                                
                                    <div *ngIf="postalCode.errors['required']">
                                        postalCode is required.
                                    </div>
                                    <div *ngIf="postalCode.errors['pattern']">
                                        postalCode is must be a 6 Digit.
                                    </div>
                                </div>
                        </div>
                    </div>

                    <!-- Address Line 1 -->
                    <div class="col mt-2">
                        <label for="Name" class="form-label">Address Line 1</label>
                        <input 
                        type="text"
                        class="form-control"
                        name="addressLine1"
                        required="required"
                        [(ngModel)]="addressForm.addressLine1"
                        #addressLine1="ngModel"
                        placeholder="Address Line 1"
                        [class.dirty]="addressLine1.dirty" 
                        [class.touched]="addressLine1.touched"
                        [ngClass]="{ 'is-invalid': addressLine1.errors && (addressLine1.touched || addressLine1.dirty ) }">

                            <div *ngIf="addressLine1.errors && (addressLine1.touched || addressLine1.dirty )" class="invalid-feedback">
                            
                                <div *ngIf="addressLine1.errors['required']">
                                    addressLine1 is required.
                                </div>
                            </div>
                    </div>

                    <!-- Address Line 2 -->
                    <div class="col mt-2">
                        <label for="Name" class="form-label">Address Line 2</label>
                        <input 
                        type="text"
                        class="form-control"
                        name="addressLine2"
                        required="required"
                        [(ngModel)]="addressForm.addressLine2"
                        #addressLine2="ngModel"
                        placeholder="Address Line 2"
                        [class.dirty]="addressLine2.dirty" 
                        [class.touched]="addressLine2.touched"
                        [ngClass]="{ 'is-invalid': addressLine2.errors && (addressLine2.touched || addressLine2.dirty ) }">

                            <div *ngIf="addressLine2.errors && (addressLine2.touched || addressLine2.dirty )" class="invalid-feedback">
                            
                                <div *ngIf="addressLine2.errors['required']">
                                    addressLine2 is required.
                                </div>
                            </div>
                    </div>


                    <div class="col mb-3 mt-2">
                        <div class="form-check">
                            <input class="form-check-input" 
                            name="defaultAddress"
                            [(ngModel)]="addressForm.defaultAddress"
                            type="checkbox" id="gridCheck1">
                            <label class="form-check-label" for="gridCheck1">
                                Make it default address
                            </label>
                        </div>
                    </div>


                    <div class="mt-3">
                        <button mat-raised-button color="primary" class="p-3" [disabled]="f.invalid">
                            save Address
                        </button>
                    </div>

            </form>


            </div>
        </div>
        

    </div>


<!-- SHOW ADDRESS TO CARD STARTING -->
<div *ngIf="!showForm"  class="container mt-3 custom-container" >
    <div class="row">
      <div class="col-12" *ngFor="let add of addresses">
        <div class="card p-3 mb-3 addressCard">
          <div class="d-flex align-items-start">
            <div class="me-3 d-flex align-items-center justify-content-center rounded-circle locationIcon">
              <mat-icon color="primary">place</mat-icon>
            </div>
  
            <div class="flex-grow-1">
              <div class="d-flex justify-content-between align-items-center flex-wrap">
                <h5 class="mb-0">{{ add.customerName }}</h5>
                <div class="btn-group">
                  <button mat-stroked-button color="primary" (click)="getAddressById(add.id)" class="me-1">
                    <mat-icon>edit</mat-icon> Edit
                  </button>
                  <button mat-stroked-button color="warn" class="me-1" (click)="deleteAddress(add.id)" >
                    <mat-icon>delete</mat-icon> Delete
                  </button>
                  <button mat-stroked-button *ngIf="!add.defaultAddress" (click)="setDefaultAddress(add.id)">
                     Set Default 
                  </button>
                </div>
              </div>
  
              <p class="text-muted small mb-1">{{ add.mobileNumber }}</p>
              <p class="small mb-1">{{ add.area }}, {{ add.addressLine1 }}, {{ add.addressLine2 }}, {{ add.postalCode }}</p>
  
              <span *ngIf="add.defaultAddress" class="badge bg-primary small">
                 Default Address 
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
</div>
<!-- SHOW ADDRESS TO CARD ENDING -->





  <!-- ========================================================================================= -->
  

<!-- Update Address Form Starting -->
<div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable custom-modal-width ">
  
      <div class="modal-content">
  
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Update Address</h5>
          <button type="button" class="btn-close" (click)="closeModal()" aria-label="Close"></button>
        </div>
  
  
  
        <div class="container-fluid">
          <form name="form" (ngSubmit)="f.form.valid && saveUpdateAddress()" #f="ngForm">
      
              <div class="row g-3 mt-2">
                  <div class="col-12">
                      <label for="inputState" class="form-label">State</label>
                      <select id="inputState" class="form-select bg-light text-dark">
                          <option selected>INDIA</option>
                      </select>
                  </div>
              </div>
      
              <div class="row g-3 mt-2">
                  <!-- NAME -->
                  <div class="col-12 col-md-6">
                      <label for="Name" class="form-label">Full Name (First and Last Name)</label>
                      <input type="text" class="form-control" name="customerName" required="required"
                          [(ngModel)]="updateAddressForm.customerName" #customerName="ngModel" pattern="^[a-zA-Z ]{3,}$"
                          placeholder="Enter Full Name"
                          [ngClass]="{ 'is-invalid': customerName.errors && (customerName.touched || customerName.dirty ) }">
      
                      <div *ngIf="customerName.errors && (customerName.touched || customerName.dirty )"
                          class="invalid-feedback">
                          <div *ngIf="customerName.errors['required']">Full Name is required.</div>
                          <div *ngIf="customerName.errors['pattern']">Full Name must be at least 3 characters.</div>
                      </div>
                  </div>
      
                  <!-- MOBILE -->
                  <div class="col-12 col-md-6">
                      <label for="Name" class="form-label">Mobile Number</label>
                      <input type="tel" class="form-control" name="mobileNumber" required="required"
                          [(ngModel)]="updateAddressForm.mobileNumber" #mobileNumber="ngModel" pattern="^\d{10}$"
                          placeholder="Enter Mobile Number"
                          [ngClass]="{ 'is-invalid': mobileNumber.errors && (mobileNumber.touched || mobileNumber.dirty ) }">
      
                      <div *ngIf="mobileNumber.errors && (mobileNumber.touched || mobileNumber.dirty )" class="invalid-feedback">
                          <div *ngIf="mobileNumber.errors['required']">Mobile Number is required.</div>
                          <div *ngIf="mobileNumber.errors['pattern']">Mobile Number must be exactly 10 digits.</div>
                      </div>
                  </div>
              </div>
      
              <div class="row g-3 mt-2">
                  <!-- FLAT HOUSE NO BUILDING -->
                  <div class="col-12 col-md-6">
                      <label for="Name" class="form-label">Flat, Area, House No</label>
                      <input type="text" class="form-control" name="area" required="required"
                          [(ngModel)]="updateAddressForm.area" #area="ngModel" placeholder="Enter Flat, Area"
                          [ngClass]="{ 'is-invalid': area.errors && (area.touched || area.dirty ) }">
      
                      <div *ngIf="area.errors && (area.touched || area.dirty )" class="invalid-feedback">
                          <div *ngIf="area.errors['required']">Flat, House No, Apartment is required.</div>
                      </div>
                  </div>
      
                  <!-- POSTALCODE -->
                  <div class="col-12 col-md-6">
                      <label for="Name" class="form-label">Postal Code</label>
                      <input type="tel" class="form-control" name="postalCode" required="required"
                          [(ngModel)]="updateAddressForm.postalCode" #postalCode="ngModel" pattern="^\d{6}$"
                          placeholder="Enter Postal Code"
                          [ngClass]="{ 'is-invalid': postalCode.errors && (postalCode.touched || postalCode.dirty ) }">
      
                      <div *ngIf="postalCode.errors && (postalCode.touched || postalCode.dirty )" class="invalid-feedback">
                          <div *ngIf="postalCode.errors['required']">Postal Code is required.</div>
                          <div *ngIf="postalCode.errors['pattern']">Postal Code must be exactly 6 digits.</div>
                      </div>
                  </div>
              </div>
      
              <!-- Address Line 1 -->
              <div class="col-12 mt-2">
                  <label for="Name" class="form-label">Address Line 1</label>
                  <input type="text" class="form-control" name="addressLine1" required="required"
                      [(ngModel)]="updateAddressForm.addressLine1" #addressLine1="ngModel" placeholder="Address Line 1"
                      [ngClass]="{ 'is-invalid': addressLine1.errors && (addressLine1.touched || addressLine1.dirty ) }">
      
                  <div *ngIf="addressLine1.errors && (addressLine1.touched || addressLine1.dirty )" class="invalid-feedback">
                      <div *ngIf="addressLine1.errors['required']">Address Line 1 is required.</div>
                  </div>
              </div>
      
              <!-- Address Line 2 -->
              <div class="col-12 mt-2">
                  <label for="Name" class="form-label">Address Line 2</label>
                  <input type="text" class="form-control" name="addressLine2" required="required"
                      [(ngModel)]="updateAddressForm.addressLine2" #addressLine2="ngModel" placeholder="Address Line 2"
                      [ngClass]="{ 'is-invalid': addressLine2.errors && (addressLine2.touched || addressLine2.dirty ) }">
      
                  <div *ngIf="addressLine2.errors && (addressLine2.touched || addressLine2.dirty )" class="invalid-feedback">
                      <div *ngIf="addressLine2.errors['required']">Address Line 2 is required.</div>
                  </div>
              </div>
      
              <div class="col-12 mb-3 mt-2">
                  <div class="form-check">
                      <input class="form-check-input" name="defaultAddress" [(ngModel)]="updateAddressForm.defaultAddress"
                          type="checkbox" id="gridCheck1">
                      <label class="form-check-label" for="gridCheck1">
                          Make it default address
                      </label>
                  </div>
              </div>
      
              <div class="mt-3 d-flex justify-content-center">
                  <button mat-raised-button color="primary" class="p-3" [disabled]="f.invalid">
                      Save Address
                  </button>
              </div>
      
          </form>
      </div>
      
        <!-- Update Form Ending -->
  
  
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closeModal()">Close</button>
        </div>
  
      </div>
    </div>
  </div>
<!-- Update Address Form Ending -->











<!-- <div>
    <button (click)="generateQRCode()">Generate QR Code</button>

    <div *ngIf="qrCodeUrl">
        <h3>Scan this QR Code to Pay</h3>
        <img [src]="qrCodeUrl" alt="UPI QR Code" style="height: 100px; width: 100px;">
        <h4>Amount: ₹{{ amount }}</h4>
    </div>
</div> -->